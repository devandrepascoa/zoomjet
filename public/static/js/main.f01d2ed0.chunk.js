(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(45),r=n.n(c);n(56),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(14),i=n(1),s=n(2);n(57);var u=function(e){var t=e.history,n=(e.call,e.stream,Object(a.useState)("")),c=Object(s.a)(n,2),r=c[0],l=c[1];return o.a.createElement("div",{className:"roomSelector"},o.a.createElement("h1",{className:"roomSelector__title"},"Zoom Jet"),o.a.createElement("form",{className:"roomSelector__searchBox",onSubmit:function(e){e.preventDefault(),e.stopPropagation(),""!=r&&(console.log(t),t.push("/"+r))}},o.a.createElement("input",{className:"roomSelector__searchInput",type:"text",onChange:function(e){return l(e.target.value)},placeholder:"Room Search..",autoFocus:!0}),o.a.createElement("button",{className:"roomSelector__searchButton",type:"submit"},o.a.createElement("i",{className:"material-icons"},"search"))))},m=n(16),d=(n(58),n(25)),f=n.n(d),v=n(46),h=(n(60),n(47)),p=n.n(h);n(61);var g,w=function(e){var t=e.name,n=void 0===t?"Default":t,c=e.stream,r=e.muted,l=void 0!==r&&r,i=Object(a.useRef)(null);return Object(a.useEffect)((function(){if(null!=c){var e=i.current;e.srcObject=c,e.muted=l,e.play()}}),[c]),o.a.createElement("div",{className:"videoStream"},o.a.createElement("video",{className:"videoStream__video",ref:i,playsInline:!0},"Your browser does not support the video tag :("),o.a.createElement("p",null,n))},E=document.createElement("canvas"),b={default:"gl_FragColor = vec4(color, 1.0);",rave:"color += vec3(sin(4.5 * u_time), sin(3.1 * u_time + 1.0), sin(2.7 * u_time)); gl_FragColor = vec4(color, 1.0);",purple:"gl_FragColor = vec4(color * vec3(0.9, 0.0, 1.0), 1.0);",yellow:"gl_FragColor = vec4(color * vec3(1.5, 1.5, 0.0), 1.0);",highContrast:"color = smoothstep(vec3(0.2), vec3(0.8), color); gl_FragColor = vec4(color, 1.0);",invert:"gl_FragColor = vec4(vec3(1.0) - color, 1.0);"};var _=function(e){var t=e.name,n=void 0===t?"default":t,c=(e.calls,e.filter),r=void 0===c?"default":c,l=e.cameraOn,i=void 0===l||l,u=e.micOn,m=void 0===u||u,d=e.onStream,h=void 0===d?function(){}:d,_=Object(a.useRef)(),O=Object(a.useRef)(),j=Object(a.useState)(null),S=Object(s.a)(j,2),x=S[0],C=S[1];function N(){var e="\n            #ifdef GL_ES\n            precision mediump float;\n            #endif\n            uniform sampler2D u_texture;\n            uniform vec2 u_resolution;\n            uniform float u_time;\n            void main() {\n            vec2 st = gl_FragCoord.xy / u_resolution.xy;\n            float x = gl_FragCoord.x;\n            float y = gl_FragCoord.y;\n            vec3 color = texture2D(u_texture, st).rgb;\n            ".concat(b[r],"\n            }\n        ");g&&g.load(e)}function y(){return k.apply(this,arguments)}function k(){return(k=Object(v.a)(f.a.mark((function e(){var t,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=_.current,n=O.current,E.width=t.videoWidth,E.height=t.videoHeight,E.getContext("2d").drawImage(t,0,0,t.videoWidth,t.videoHeight),a=E.toDataURL(),g||(g=new p.a(n),N()),g.setUniform("u_texture",a),window.requestAnimationFrame(y);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){e.getVideoTracks()[0].enabled=i,e.getAudioTracks()[0].enabled=m,C(e),h(e)})).catch((function(e){console.log(e)}))}),[]),Object(a.useEffect)((function(){if(x){var e=x.getVideoTracks().length>0?x.getVideoTracks()[0]:null;if(!e)return;e.enabled=!!i}}),[i]),Object(a.useEffect)((function(){if(x){var e=x.getAudioTracks().length>0?x.getAudioTracks()[0]:null;if(!e)return;e.enabled=!!m}}),[m]),"default"==r?o.a.createElement(w,{muted:!0,stream:x,name:n}):o.a.createElement("div",{className:"modifiedVideoStream"},o.a.createElement("video",{muted:!0,onPlay:y,ref:_,playsInline:!0},"Your browser does not support the video tag :("),o.a.createElement("canvas",{ref:O}))},O=n(48),j=n.n(O),S=n(49),x=n.n(S);n(95);var C=function(e){var t=e.user,n=void 0===t?{name:"Default",id:null}:t,c=e.call,r=e.stream;return Object(a.useEffect)((function(){return function(){console.log("Closed Call Stream with id:"+c.peer),c.close()}}),[]),o.a.createElement(w,{stream:r,name:n.name})},N=[];var y=function(e){var t=e.room_id,n=e.name,c=(e.password,Object(a.useState)(null)),r=Object(s.a)(c,2),l=r[0],i=r[1],u=Object(a.useState)(!1),d=Object(s.a)(u,2),f=d[0],v=d[1],h=Object(a.useState)({name:n,id:null}),p=Object(s.a)(h,2),g=p[0],w=p[1],E=Object(a.useState)([]),b=Object(s.a)(E,2),O=b[0],S=b[1],y=Object(a.useState)("default"),k=Object(s.a)(y,2),z=k[0],M=(k[1],Object(a.useState)(5)),F=Object(s.a)(M,2),H=F[0],L=F[1],V=Object(a.useState)([]),B=Object(s.a)(V,2),D=B[0],A=B[1],T=Object(a.useState)(""),U=Object(s.a)(T,2),R=U[0],I=U[1],P=Object(a.useState)(!0),W=Object(s.a)(P,2),J=W[0],G=W[1],Y=Object(a.useState)(!0),q=Object(s.a)(Y,2),K=q[0],Z=q[1];Object(a.useEffect)((function(){L(0)}),[f]);var $=function(e,t,n){S((function(a){return a.find((function(e){return e.stream.id==n.id}))?a:[].concat(Object(m.a)(a),[{user:e,call:t,stream:n}])}))},Q=function(e,t,n){console.log("New user connected with name: "+n.name+" and id:"+n.id);var a=e.call(n.id,t,{metadata:{user:g}});a.on("stream",(function(e){$(n,a,e)})),a.on("close",(function(){console.log("User: "+n.name+" with id:"+n.id+" closed connection"),S((function(e){return e.filter((function(e){return e.call.peer!=a.peer}))}))})),N.push(a)};return o.a.createElement("div",{className:"room"},o.a.createElement("div",{className:"room__conference "+(f?"popup":"")},o.a.createElement("div",{className:"room__videoGrid"},o.a.createElement(_,{calls:N,name:g.name,filter:z,onStream:function(e){return function(e){var n=j()("https://casa.pascoa.org:443",{secure:!0});window.addEventListener("beforeunload",(function(){n.emit("disconnect")})),i(n);var a=new x.a(void 0,{secure:!0,proxied:!0,path:"/peerjs",host:"/",port:"8443"});a.on("open",(function(e){console.log("Connected to server with id: "+e+" and name: "+g.name),n.emit("join-room",t,e,g.name),w((function(t){return{name:t.name,id:e}}))})),a.on("call",(function(t){t.answer(e,{metadata:{user:g}}),t.on("stream",(function(e){$(t.metadata.user,t,e)})),N.push({user:t.metadata.user,call:t})})),n.on("received-message",(function(e,t){var n=e.name;A((function(e){return[].concat(Object(m.a)(e),[{name:n,message:t}])})),!f&&window.matchMedia("(max-width: 900px)").matches&&L((function(e){return e+1}))})),n.on("user-disconnected",(function(e){console.log("User: "+e+" disconnected"),S((function(t){return t.filter((function(t){return t.call.peer!=e}))}))})),n.on("user-connected",(function(t){Q(a,e,t)}))}(e)},cameraOn:J,micOn:K}),O.map((function(e,t){return o.a.createElement(C,{key:t,user:e.user,call:e.call,stream:e.stream})}))),o.a.createElement("div",{className:"room__options"},o.a.createElement("button",{onClick:function(){return G((function(e){return!e}))}},J?o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),o.a.createElement("path",{fill:"white",d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})):o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M0 0h24v24H0zm0 0h24v24H0z",fill:"none"}),o.a.createElement("path",{fill:"white",d:"M21 6.5l-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"}))),o.a.createElement("button",{onClick:function(){return Z((function(e){return!e}))}},K?o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},o.a.createElement("path",{fill:"white",d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"}),o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})):o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M0 0h24v24H0zm0 0h24v24H0z",fill:"none"}),o.a.createElement("path",{fill:"white",d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"}))),o.a.createElement("button",{className:"room__messagePopupButton",onClick:function(){return v(!0)}},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30.743px",height:"30.744px",viewBox:"0 0 30.743 30.744",fill:"white"},o.a.createElement("path",{d:"M28.585,9.67h-0.842v9.255c0,1.441-0.839,2.744-2.521,2.744H8.743v0.44c0,1.274,1.449,2.56,2.937,2.56h12.599l4.82,2.834 L28.4,24.669h0.185c1.487,0,2.158-1.283,2.158-2.56V11.867C30.743,10.593,30.072,9.67,28.585,9.67z"}),o.a.createElement("path",{d:"M22.762,3.24H3.622C1.938,3.24,0,4.736,0,6.178v11.6c0,1.328,1.642,2.287,3.217,2.435l-1.025,3.891L8.76,20.24h14.002 c1.684,0,3.238-1.021,3.238-2.462V8.393V6.178C26,4.736,24.445,3.24,22.762,3.24z M6.542,13.032c-0.955,0-1.729-0.774-1.729-1.729 s0.774-1.729,1.729-1.729c0.954,0,1.729,0.774,1.729,1.729S7.496,13.032,6.542,13.032z M13,13.032 c-0.955,0-1.729-0.774-1.729-1.729S12.045,9.574,13,9.574s1.729,0.774,1.729,1.729S13.955,13.032,13,13.032z M19.459,13.032 c-0.955,0-1.73-0.774-1.73-1.729s0.775-1.729,1.73-1.729c0.953,0,1.729,0.774,1.729,1.729S20.412,13.032,19.459,13.032z"})),H>0?o.a.createElement("div",null,H):null))),o.a.createElement("div",{className:"room__chat "+(f?"popup":"")},o.a.createElement("div",{className:"room__header"},o.a.createElement("button",{onClick:function(){return v(!1)}},o.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"20.743",height:"20.743",viewBox:"0 0 256 256",fill:"white"},o.a.createElement("polygon",{points:"207.093,30.187 176.907,0 48.907,128 176.907,256 207.093,225.813 109.28,128 \t\t"}))),o.a.createElement("p",null,"Chat messages"),o.a.createElement("div",null)),o.a.createElement("div",{className:"room__chatWindow"},o.a.createElement("ul",{className:"room__messages"},D.map((function(e,t){var n=e.name,a=e.message;return o.a.createElement("li",{key:t,className:"message"},o.a.createElement("b",null,n),o.a.createElement("br",null),a)})))),o.a.createElement("div",{className:"room__messageContainer"},o.a.createElement("input",{onKeyDown:function(e){if(("Enter"===e.key||13===e.keyCode)&&R.length>0&&null!=l){l.emit("message",R),I("");var t=g.name;A((function(e){return[].concat(Object(m.a)(e),[{name:t,message:R}])}))}},value:R,onChange:function(e){return I(e.target.value)},placeholder:"Type message here..."}))))};n(96);var k=function(e){e.history;var t=e.location.pathname.split("/")[1],n=Object(a.useState)(!1),c=Object(s.a)(n,2),r=c[0],l=c[1],i=Object(a.useState)(""),u=Object(s.a)(i,2),m=u[0],d=u[1],f=Object(a.useState)(""),v=Object(s.a)(f,2),h=v[0],p=v[1],g=Object(a.useState)(!1),w=Object(s.a)(g,2),E=w[0];return w[1],r?o.a.createElement(y,{room_id:t,name:m,password:h}):o.a.createElement("div",{className:"roomAuthentication"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),m.length>0&&(!E||h.length>0)&&l(!0)},className:"roomAuthentication__form"},o.a.createElement("h1",null,"Authentication For Room: ",t),o.a.createElement("input",{onChange:function(e){d(e.target.value)},placeholder:"Name",autoFocus:!0,className:"roomAuthentication__name"}),E?o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{onChange:function(e){p(e.target.value)},placeholder:"Password",className:"roomAuthentication__password"})):null,o.a.createElement("button",{className:"roomAuthentication__submit"},o.a.createElement("svg",{width:"451.846px",height:"451.847px",viewBox:"0 0 451.846 451.847"},o.a.createElement("path",{d:"M345.441,248.292L151.154,442.573c-12.359,12.365-32.397,12.365-44.75,0c-12.354-12.354-12.354-32.391,0-44.744 L278.318,225.92L106.409,54.017c-12.354-12.359-12.354-32.394,0-44.748c12.354-12.359,32.391-12.359,44.75,0l194.287,194.284 c6.177,6.18,9.262,14.271,9.262,22.366C354.708,234.018,351.617,242.115,345.441,248.292z"})))))};r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(l.a,null,o.a.createElement(i.a,{exact:!0,path:"/",component:u}),o.a.createElement(i.a,{exact:!0,path:"/:room_id",component:k}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},51:function(e,t,n){e.exports=n(101)},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},91:function(e,t){},94:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=94},95:function(e,t,n){},96:function(e,t,n){}},[[51,1,2]]]);
//# sourceMappingURL=main.f01d2ed0.chunk.js.map