(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(45),r=a.n(c);a(56),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(14),i=a(1),s=a(2);a(57);var u=function(e){var t=e.history,a=(e.call,e.stream,Object(n.useState)("")),c=Object(s.a)(a,2),r=c[0],l=c[1];return o.a.createElement("div",{className:"roomSelector"},o.a.createElement("h1",{className:"roomSelector__title"},"Zoom Jet"),o.a.createElement("form",{className:"roomSelector__searchBox",onSubmit:function(e){e.preventDefault(),e.stopPropagation(),""!=r&&(console.log(t),t.push("/"+r))}},o.a.createElement("input",{className:"roomSelector__searchInput",type:"text",onChange:function(e){return l(e.target.value)},placeholder:"Room Search..",autoFocus:!0}),o.a.createElement("button",{className:"roomSelector__searchButton",type:"submit"},o.a.createElement("i",{className:"material-icons"},"search"))))},m=a(16),d=(a(58),a(25)),f=a.n(d),v=a(46),h=(a(60),a(47)),p=a.n(h);a(61);var g,w=function(e){var t=e.name,a=void 0===t?"Default":t,c=e.stream,r=e.muted,l=void 0!==r&&r,i=Object(n.useRef)(null);return Object(n.useEffect)((function(){if(null!=c){var e=i.current;e.srcObject=c,e.muted=l,e.play()}}),[c]),o.a.createElement("div",{className:"videoStream"},o.a.createElement("video",{className:"videoStream__video",ref:i,playsInline:!0},"Your browser does not support the video tag :("),o.a.createElement("p",null,a))},E=document.createElement("canvas"),b={default:"gl_FragColor = vec4(color, 1.0);",rave:"color += vec3(sin(4.5 * u_time), sin(3.1 * u_time + 1.0), sin(2.7 * u_time)); gl_FragColor = vec4(color, 1.0);",purple:"gl_FragColor = vec4(color * vec3(0.9, 0.0, 1.0), 1.0);",yellow:"gl_FragColor = vec4(color * vec3(1.5, 1.5, 0.0), 1.0);",highContrast:"color = smoothstep(vec3(0.2), vec3(0.8), color); gl_FragColor = vec4(color, 1.0);",invert:"gl_FragColor = vec4(vec3(1.0) - color, 1.0);"};var _=function(e){var t=e.name,a=void 0===t?"default":t,c=(e.calls,e.filter),r=void 0===c?"default":c,l=e.cameraOn,i=void 0===l||l,u=e.micOn,m=void 0===u||u,d=e.onStream,h=void 0===d?function(){}:d,_=Object(n.useRef)(),O=Object(n.useRef)(),j=Object(n.useState)(null),S=Object(s.a)(j,2),x=S[0],N=S[1];function C(){var e="\n            #ifdef GL_ES\n            precision mediump float;\n            #endif\n            uniform sampler2D u_texture;\n            uniform vec2 u_resolution;\n            uniform float u_time;\n            void main() {\n            vec2 st = gl_FragCoord.xy / u_resolution.xy;\n            float x = gl_FragCoord.x;\n            float y = gl_FragCoord.y;\n            vec3 color = texture2D(u_texture, st).rgb;\n            ".concat(b[r],"\n            }\n        ");g&&g.load(e)}function y(){return z.apply(this,arguments)}function z(){return(z=Object(v.a)(f.a.mark((function e(){var t,a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=_.current,a=O.current,E.width=t.videoWidth,E.height=t.videoHeight,E.getContext("2d").drawImage(t,0,0,t.videoWidth,t.videoHeight),n=E.toDataURL(),g||(g=new p.a(a),C()),g.setUniform("u_texture",n),window.requestAnimationFrame(y);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){e.getVideoTracks()[0].enabled=i,e.getAudioTracks()[0].enabled=m,N(e),h(e)})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){if(x){var e=x.getVideoTracks()[0];e.enabled=!!i}}),[i]),Object(n.useEffect)((function(){if(x){var e=x.getAudioTracks()[0];e.enabled=!!m}}),[m]),"default"==r?o.a.createElement(w,{muted:!0,stream:x,name:a}):o.a.createElement("div",{className:"modifiedVideoStream"},o.a.createElement("video",{muted:!0,onPlay:y,ref:_,playsInline:!0},"Your browser does not support the video tag :("),o.a.createElement("canvas",{ref:O}))},O=a(48),j=a.n(O),S=a(49),x=a.n(S);a(95);var N=function(e){var t=e.user,a=void 0===t?{name:"Default",id:null}:t,c=e.call,r=e.stream;return Object(n.useEffect)((function(){return function(){console.log("Closed Call Stream with id:"+c.peer),c.close()}}),[]),o.a.createElement(w,{stream:r,name:a.name})},C=[];var y=function(e){var t=e.room_id,a=e.name,c=(e.password,Object(n.useState)(null)),r=Object(s.a)(c,2),l=r[0],i=r[1],u=Object(n.useState)(!1),d=Object(s.a)(u,2),f=d[0],v=d[1],h=Object(n.useState)({name:a,id:null}),p=Object(s.a)(h,2),g=p[0],w=p[1],E=Object(n.useState)([]),b=Object(s.a)(E,2),O=b[0],S=b[1],y=Object(n.useState)("default"),z=Object(s.a)(y,2),M=z[0],k=(z[1],Object(n.useState)(5)),H=Object(s.a)(k,2),F=H[0],L=H[1],V=Object(n.useState)([]),A=Object(s.a)(V,2),B=A[0],D=A[1],U=Object(n.useState)(""),R=Object(s.a)(U,2),T=R[0],I=R[1],P=Object(n.useState)(!0),W=Object(s.a)(P,2),J=W[0],G=W[1],Y=Object(n.useState)(!0),q=Object(s.a)(Y,2),K=q[0],Z=q[1];Object(n.useEffect)((function(){L(0)}),[f]);var $=function(e,t,a){S((function(n){return n.find((function(e){return e.stream.id==a.id}))?n:[].concat(Object(m.a)(n),[{user:e,call:t,stream:a}])}))},Q=function(e,t,a){console.log("New user connected with name: "+a.name+" and id:"+a.id);var n=e.call(a.id,t,{metadata:{user:g}});n.on("stream",(function(e){$(a,n,e)})),n.on("close",(function(){console.log("User: "+a.name+" with id:"+a.id+" closed connection"),S((function(e){return e.filter((function(e){return e.call.peer!=n.peer}))}))})),C.push(n)};return o.a.createElement("div",{className:"room"},o.a.createElement("div",{className:"room__conference "+(f?"popup":"")},o.a.createElement("div",{className:"room__videoGrid"},o.a.createElement(_,{calls:C,name:g.name,filter:M,onStream:function(e){return function(e){var a=j()("casa.pascoa.org",{secure:!0});i(a);var n=new x.a(void 0,{path:"/peerjs",host:"casa.pascoa.org",port:"8443"});n.on("open",(function(e){console.log("Connected to server with id: "+e+" and name: "+g.name),a.emit("join-room",t,e,g.name),w((function(t){return{name:t.name,id:e}}))})),n.on("call",(function(t){t.answer(e,{metadata:{user:g}}),t.on("stream",(function(e){$(t.metadata.user,t,e)})),C.push({user:t.metadata.user,call:t})})),a.on("received-message",(function(e,t){var a=e.name;D((function(e){return[].concat(Object(m.a)(e),[{name:a,message:t}])})),!f&&window.matchMedia("(max-width: 900px)").matches&&(console.log("Happened"),L((function(e){return e+1})))})),a.on("user-disconnected",(function(e){console.log("User: "+e+" disconnected"),S((function(t){return t.filter((function(t){return t.call.peer!=e}))}))})),a.on("user-connected",(function(t){Q(n,e,t)}))}(e)},cameraOn:J,micOn:K}),O.map((function(e,t){return o.a.createElement(N,{key:t,user:e.user,call:e.call,stream:e.stream})}))),o.a.createElement("div",{className:"room__options"},o.a.createElement("button",{onClick:function(){return G((function(e){return!e}))}},J?o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),o.a.createElement("path",{fill:"white",d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})):o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M0 0h24v24H0zm0 0h24v24H0z",fill:"none"}),o.a.createElement("path",{fill:"white",d:"M21 6.5l-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"}))),o.a.createElement("button",{onClick:function(){return Z((function(e){return!e}))}},K?o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},o.a.createElement("path",{fill:"white",d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"}),o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})):o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M0 0h24v24H0zm0 0h24v24H0z",fill:"none"}),o.a.createElement("path",{fill:"white",d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"}))),o.a.createElement("button",{className:"room__messagePopupButton",onClick:function(){return v(!0)}},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30.743px",height:"30.744px",viewBox:"0 0 30.743 30.744",fill:"white"},o.a.createElement("path",{d:"M28.585,9.67h-0.842v9.255c0,1.441-0.839,2.744-2.521,2.744H8.743v0.44c0,1.274,1.449,2.56,2.937,2.56h12.599l4.82,2.834 L28.4,24.669h0.185c1.487,0,2.158-1.283,2.158-2.56V11.867C30.743,10.593,30.072,9.67,28.585,9.67z"}),o.a.createElement("path",{d:"M22.762,3.24H3.622C1.938,3.24,0,4.736,0,6.178v11.6c0,1.328,1.642,2.287,3.217,2.435l-1.025,3.891L8.76,20.24h14.002 c1.684,0,3.238-1.021,3.238-2.462V8.393V6.178C26,4.736,24.445,3.24,22.762,3.24z M6.542,13.032c-0.955,0-1.729-0.774-1.729-1.729 s0.774-1.729,1.729-1.729c0.954,0,1.729,0.774,1.729,1.729S7.496,13.032,6.542,13.032z M13,13.032 c-0.955,0-1.729-0.774-1.729-1.729S12.045,9.574,13,9.574s1.729,0.774,1.729,1.729S13.955,13.032,13,13.032z M19.459,13.032 c-0.955,0-1.73-0.774-1.73-1.729s0.775-1.729,1.73-1.729c0.953,0,1.729,0.774,1.729,1.729S20.412,13.032,19.459,13.032z"})),F>0?o.a.createElement("div",null,F):null))),o.a.createElement("div",{className:"room__chat "+(f?"popup":"")},o.a.createElement("div",{className:"room__header"},o.a.createElement("button",{onClick:function(){return v(!1)}},o.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"20.743",height:"20.743",viewBox:"0 0 256 256",fill:"white"},o.a.createElement("polygon",{points:"207.093,30.187 176.907,0 48.907,128 176.907,256 207.093,225.813 109.28,128 \t\t"}))),o.a.createElement("p",null,"Chat messages"),o.a.createElement("div",null)),o.a.createElement("div",{className:"room__chatWindow"},o.a.createElement("ul",{className:"room__messages"},B.map((function(e,t){var a=e.name,n=e.message;return o.a.createElement("li",{key:t,className:"message"},o.a.createElement("b",null,a),o.a.createElement("br",null),n)})))),o.a.createElement("div",{className:"room__messageContainer"},o.a.createElement("input",{onKeyDown:function(e){if(("Enter"===e.key||13===e.keyCode)&&T.length>0&&null!=l){l.emit("message",T),I("");var t=g.name;D((function(e){return[].concat(Object(m.a)(e),[{name:t,message:T}])}))}},value:T,onChange:function(e){return I(e.target.value)},placeholder:"Type message here..."}))))};a(96);var z=function(e){e.history;var t=e.location.pathname.split("/")[1],a=Object(n.useState)(!1),c=Object(s.a)(a,2),r=c[0],l=c[1],i=Object(n.useState)(""),u=Object(s.a)(i,2),m=u[0],d=u[1],f=Object(n.useState)(""),v=Object(s.a)(f,2),h=v[0],p=v[1],g=Object(n.useState)(!1),w=Object(s.a)(g,2),E=w[0];return w[1],r?o.a.createElement(y,{room_id:t,name:m,password:h}):o.a.createElement("div",{className:"roomAuthentication"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),m.length>0&&(!E||h.length>0)&&l(!0)},className:"roomAuthentication__form"},o.a.createElement("h1",null,"Authentication for room: ",t),o.a.createElement("label",{className:"roomAuthentication__nameLabel"},"Name"),o.a.createElement("input",{onChange:function(e){d(e.target.value)},autoFocus:!0,className:"roomAuthentication__name"}),E?o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{className:"roomAuthentication__passwordLabel"},"Room Password"),o.a.createElement("input",{onChange:function(e){p(e.target.value)},className:"roomAuthentication__password"})):null,o.a.createElement("button",{className:"roomAuthentication__submit"})))};r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(l.a,null,o.a.createElement(i.a,{exact:!0,path:"/",component:u}),o.a.createElement(i.a,{exact:!0,path:"/:room_id",component:z}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},51:function(e,t,a){e.exports=a(101)},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},91:function(e,t){},94:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=94},95:function(e,t,a){},96:function(e,t,a){}},[[51,1,2]]]);
//# sourceMappingURL=main.ed5b99ea.chunk.js.map