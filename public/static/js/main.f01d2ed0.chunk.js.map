{"version":3,"sources":["serviceWorker.js","RoomSelector.js","VideoStream.js","ModifiedVideoStream.js","CallStream.js","Room.js","RoomAuthentication.js","index.js","../node_modules/peerjs/dist sync"],"names":["Boolean","window","location","hostname","match","RoomSelector","history","call","stream","useState","room","setRoom","className","onSubmit","e","preventDefault","stopPropagation","console","log","push","type","onChange","target","value","placeholder","autoFocus","VideoStream","glslCanvas","name","muted","videoRef","useRef","useEffect","video","current","srcObject","play","ref","playsInline","backCanvas","document","createElement","filters","default","rave","purple","yellow","highContrast","invert","ModifiedVideoStream","calls","filter","cameraOn","micOn","onStream","frontCanvas","setStream","update","vertexShader","load","render","a","frontFrameBuffer","width","videoWidth","height","videoHeight","getContext","drawImage","dataURL","toDataURL","GlslCanvas","setUniform","requestAnimationFrame","navigator","mediaDevices","getUserMedia","audio","then","localStream","getVideoTracks","enabled","getAudioTracks","catch","error","videoTrack","length","audioTrack","onPlay","CallStream","user","id","peer","close","Room","room_id","password","socket","setSocket","chatPopUp","setChatPopup","localUser","setLocalUser","callStreams","setCallStreams","numUncheckedMessages","setNumUncheckedMessages","messages","setMessages","message","setMessage","setCameraOn","setMicOn","addCallStreamToGrid","remoteStream","streams","find","temp_stream","callNewUser","metadata","on","io","secure","addEventListener","emit","Peer","undefined","proxied","path","host","port","answer","matchMedia","matches","num","joinRoom","map","callStream","index","key","onClick","xmlns","viewBox","d","fill","version","points","onKeyDown","keyCode","RoomAuthentication","pathname","split","formValidated","setFormValidated","setName","setPassword","hasPassword","ReactDOM","StrictMode","exact","component","getElementById","serviceWorker","ready","registration","unregister","webpackEmptyContext","req","Error","code","keys","resolve","module","exports"],"mappings":"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","file":"static/js/main.f01d2ed0.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React, { useEffect, useState, useRef } from \"react\";\nimport \"./RoomSelector.css\";\n\nfunction RoomSelector({ history, call, stream }) {\n  const [room, setRoom] = useState(\"\");\n  const onRoomSubmit = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (room == \"\") return;\n    console.log(history);\n    history.push(\"/\" + room);\n  };\n\n  return (\n    <div className=\"roomSelector\">\n      <h1 className=\"roomSelector__title\">Zoom Jet</h1>\n      <form className=\"roomSelector__searchBox\" onSubmit={onRoomSubmit}>\n        <input\n          className=\"roomSelector__searchInput\"\n          type=\"text\"\n          onChange={(e) => setRoom(e.target.value)}\n          placeholder=\"Room Search..\"\n          autoFocus={true}\n        />\n        <button className=\"roomSelector__searchButton\" type=\"submit\">\n          <i className=\"material-icons\">search</i>\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default RoomSelector;\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport \"./VideoStream.css\";\n\nfunction VideoStream({ name = \"Default\", stream, muted = false }) {\n  const videoRef = useRef(null);\n\n  const putStreamOnVideoTag = () => {\n    if (stream != null) {\n      let video = videoRef.current;\n      video.srcObject = stream;\n      video.muted = muted;\n      video.play();\n    }\n  };\n\n  useEffect(putStreamOnVideoTag, [stream]);\n\n  return (\n    <div className=\"videoStream\">\n      <video className=\"videoStream__video\" ref={videoRef} playsInline={true}>\n        Your browser does not support the video tag :(\n      </video>\n      <p>{name}</p>\n    </div>\n  );\n}\n\nexport default VideoStream;\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport \"./ModifiedVideoStream.css\";\nimport GlslCanvas from \"glslCanvas\";\nimport VideoStream from \"./VideoStream\";\n\nvar glslCanvas;\nconst backCanvas = document.createElement(\"canvas\");\n\nvar filters = {\n  default: \"gl_FragColor = vec4(color, 1.0);\",\n  rave:\n    \"color += vec3(sin(4.5 * u_time), sin(3.1 * u_time + 1.0), sin(2.7 * u_time)); gl_FragColor = vec4(color, 1.0);\",\n  purple: \"gl_FragColor = vec4(color * vec3(0.9, 0.0, 1.0), 1.0);\",\n  yellow: \"gl_FragColor = vec4(color * vec3(1.5, 1.5, 0.0), 1.0);\",\n  highContrast:\n    \"color = smoothstep(vec3(0.2), vec3(0.8), color); gl_FragColor = vec4(color, 1.0);\",\n  invert: \"gl_FragColor = vec4(vec3(1.0) - color, 1.0);\",\n};\n\nfunction ModifiedVideoStream({\n  name = \"default\",\n  calls,\n  filter = \"default\",\n  cameraOn = true,\n  micOn = true,\n  onStream = () => {},\n}) {\n  const videoRef = useRef();\n  const frontCanvas = useRef();\n\n  const [stream, setStream] = useState(null);\n\n  useEffect(() => {\n    navigator.mediaDevices\n      // .getDisplayMedia()\n      .getUserMedia({ video: true, audio: true })\n      .then((localStream) => {\n        localStream.getVideoTracks()[0].enabled = cameraOn;\n        localStream.getAudioTracks()[0].enabled = micOn;\n        setStream(localStream);\n        onStream(localStream);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n\n  // useEffect(() => {\n  //     if (stream) {\n  //         if (filter != 'default') {\n  //             console.log(calls)\n\n  //             calls.forEach((call) => {\n  //                 let videoSender = call.peerConnection.getSenders().find((sender) => sender.track.kind == 'video')\n  //                 videoSender.replaceTrack(videoTrack)\n  //             })\n  //         } else {\n  //             let videoTrack = stream.getVideoTracks()[0]\n  //             calls.forEach((call) => {\n  //                 let videoSender = call.peerConnection.getSenders().find((sender) => sender.track.kind == 'video')\n  //                 videoSender.replaceTrack(videoTrack)\n  //             })\n\n  //         }\n  //     }\n  // }, [stream, filter])\n\n  useEffect(() => {\n    if (stream) {\n      let videoTrack =\n        stream.getVideoTracks().length > 0 ? stream.getVideoTracks()[0] : null;\n      if (!videoTrack) return;\n      if (cameraOn) videoTrack.enabled = true;\n      else videoTrack.enabled = false;\n    }\n  }, [cameraOn]);\n\n  useEffect(() => {\n    if (stream) {\n      let audioTrack =\n        stream.getAudioTracks().length > 0 ? stream.getAudioTracks()[0] : null;\n      if (!audioTrack) return;\n      if (micOn) audioTrack.enabled = true;\n      else audioTrack.enabled = false;\n    }\n  }, [micOn]);\n\n  function update() {\n    const vertexShader = `\n            #ifdef GL_ES\n            precision mediump float;\n            #endif\n            uniform sampler2D u_texture;\n            uniform vec2 u_resolution;\n            uniform float u_time;\n            void main() {\n            vec2 st = gl_FragCoord.xy / u_resolution.xy;\n            float x = gl_FragCoord.x;\n            float y = gl_FragCoord.y;\n            vec3 color = texture2D(u_texture, st).rgb;\n            ${filters[filter]}\n            }\n        `;\n\n    if (glslCanvas) glslCanvas.load(vertexShader);\n  }\n\n  async function render() {\n    let video = videoRef.current;\n    let frontFrameBuffer = frontCanvas.current;\n    backCanvas.width = video.videoWidth;\n    backCanvas.height = video.videoHeight;\n\n    let ctx = backCanvas.getContext(\"2d\");\n    ctx.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\n\n    var dataURL = backCanvas.toDataURL();\n\n    if (!glslCanvas) {\n      glslCanvas = new GlslCanvas(frontFrameBuffer);\n      update();\n    }\n\n    glslCanvas.setUniform(\"u_texture\", dataURL);\n    window.requestAnimationFrame(render);\n  }\n\n  return filter == \"default\" ? (\n    <VideoStream muted={true} stream={stream} name={name}></VideoStream>\n  ) : (\n    <div className={\"modifiedVideoStream\"}>\n      <video muted={true} onPlay={render} ref={videoRef} playsInline={true}>\n        Your browser does not support the video tag :(\n      </video>\n      <canvas ref={frontCanvas} />\n    </div>\n  );\n}\n\nexport default ModifiedVideoStream;\n","import React, { useEffect, useState, useRef } from \"react\";\nimport VideoStream from \"./VideoStream\";\nimport \"./CallStream.css\";\nfunction CallStream({ user = { name: \"Default\", id: null }, call, stream }) {\n  useEffect(() => {\n    return () => {\n      console.log(\"Closed Call Stream with id:\" + call.peer);\n      call.close();\n    };\n  }, []);\n\n  return <VideoStream stream={stream} name={user.name}></VideoStream>;\n}\n\nexport default CallStream;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport \"./Room.css\";\nimport ModifiedVideoStream from \"./ModifiedVideoStream\";\nimport io from \"socket.io-client\";\nimport Peer from \"peerjs\";\nimport CallStream from \"./CallStream\";\nlet calls = [];\nlet socketio_port =\n  !process.env.NODE_ENV || process.env.NODE_ENV === \"development\"\n    ? \"3000\"\n    : \"443\";\nlet peerjs_port =\n  !process.env.NODE_ENV || process.env.NODE_ENV === \"development\"\n    ? \"3443\"\n    : \"8443\";\n\nfunction Room({ room_id, name, password }) {\n  const [socket, setSocket] = useState(null);\n  const [chatPopUp, setChatPopup] = useState(false);\n  const [localUser, setLocalUser] = useState({ name: name, id: null });\n  const [callStreams, setCallStreams] = useState([]);\n  const [filter, setFilter] = useState(\"default\");\n  const [numUncheckedMessages, setNumUncheckedMessages] = useState(5);\n  const [messages, setMessages] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const [cameraOn, setCameraOn] = useState(true);\n  const [micOn, setMicOn] = useState(true);\n\n  useEffect(() => {\n    setNumUncheckedMessages(0);\n  }, [chatPopUp]);\n\n  const joinRoom = (localStream) => {\n    const socket = io(\"https://casa.pascoa.org:\" + socketio_port, {\n      secure: true,\n    });\n    window.addEventListener(\"beforeunload\", () => {\n      socket.emit(\"disconnect\");\n    });\n\n    setSocket(socket);\n    const peer = new Peer(undefined, {\n      secure: true,\n      proxied: true,\n      path: \"/peerjs\",\n      host: \"/\",\n      port: peerjs_port,\n    });\n\n    peer.on(\"open\", (id) => {\n      console.log(\n        \"Connected to server with id: \" + id + \" and name: \" + localUser.name\n      );\n      socket.emit(\"join-room\", room_id, id, localUser.name);\n      setLocalUser((user) => {\n        return { name: user.name, id: id };\n      });\n    });\n\n    peer.on(\"call\", (call) => {\n      call.answer(localStream, { metadata: { user: localUser } });\n      call.on(\"stream\", (remoteStream) => {\n        addCallStreamToGrid(call.metadata.user, call, remoteStream);\n      });\n      calls.push({ user: call.metadata.user, call: call });\n    });\n\n    socket.on(\"received-message\", (user, message) => {\n      let name = user.name;\n      setMessages((messages) => [...messages, { name, message }]);\n      if (!chatPopUp && window.matchMedia(\"(max-width: 900px)\").matches) {\n        setNumUncheckedMessages((num) => num + 1);\n      }\n    });\n\n    socket.on(\"user-disconnected\", (id) => {\n      console.log(\"User: \" + id + \" disconnected\");\n\n      setCallStreams((streams) =>\n        streams.filter((temp_stream) => {\n          return temp_stream.call.peer != id;\n        })\n      );\n    });\n\n    socket.on(\"user-connected\", (user) => {\n      callNewUser(peer, localStream, user);\n    });\n  };\n\n  const addCallStreamToGrid = (user, call, remoteStream) => {\n    setCallStreams((streams) => {\n      let already_exists = streams.find((temp_stream) => {\n        return temp_stream.stream.id == remoteStream.id;\n      });\n      if (!already_exists)\n        return [...streams, { user: user, call: call, stream: remoteStream }];\n      else return streams;\n    });\n  };\n\n  const callNewUser = (peer, localStream, user) => {\n    console.log(\n      \"New user connected with name: \" + user.name + \" and id:\" + user.id\n    );\n    const call = peer.call(user.id, localStream, {\n      metadata: { user: localUser },\n    });\n\n    call.on(\"stream\", (remoteStream) => {\n      addCallStreamToGrid(user, call, remoteStream);\n    });\n\n    call.on(\"close\", () => {\n      console.log(\n        \"User: \" + user.name + \" with id:\" + user.id + \" closed connection\"\n      );\n      setCallStreams((streams) =>\n        streams.filter((temp_stream) => {\n          return temp_stream.call.peer != call.peer;\n        })\n      );\n    });\n\n    calls.push(call);\n  };\n\n  const onMessageSent = (e) => {\n    if (\n      (e.key === \"Enter\" || e.keyCode === 13) &&\n      message.length > 0 &&\n      socket != null\n    ) {\n      socket.emit(\"message\", message);\n      setMessage(\"\");\n      let name = localUser.name;\n      setMessages((messages) => [...messages, { name, message }]);\n    }\n  };\n\n  return (\n    <div className=\"room\">\n      <div className={\"room__conference \" + (chatPopUp ? \"popup\" : \"\")}>\n        <div className=\"room__videoGrid\">\n          <ModifiedVideoStream\n            calls={calls}\n            name={localUser.name}\n            filter={filter}\n            onStream={(stream) => joinRoom(stream)}\n            cameraOn={cameraOn}\n            micOn={micOn}\n          ></ModifiedVideoStream>\n          {callStreams.map((callStream, index) => (\n            <CallStream\n              key={index}\n              user={callStream.user}\n              call={callStream.call}\n              stream={callStream.stream}\n            />\n          ))}\n        </div>\n        <div className=\"room__options\">\n          <button onClick={() => setCameraOn((cameraOn) => !cameraOn)}>\n            {cameraOn ? (\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"32\"\n                height=\"32\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n                <path\n                  fill=\"white\"\n                  d=\"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z\"\n                />\n              </svg>\n            ) : (\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"32\"\n                height=\"32\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path d=\"M0 0h24v24H0zm0 0h24v24H0z\" fill=\"none\" />\n                <path\n                  fill=\"white\"\n                  d=\"M21 6.5l-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z\"\n                />\n              </svg>\n            )}\n          </button>\n          <button onClick={() => setMicOn((micOn) => !micOn)}>\n            {micOn ? (\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"32\"\n                height=\"32\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  fill=\"white\"\n                  d=\"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z\"\n                />\n                <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n              </svg>\n            ) : (\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"32\"\n                height=\"32\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path d=\"M0 0h24v24H0zm0 0h24v24H0z\" fill=\"none\" />\n                <path\n                  fill=\"white\"\n                  d=\"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z\"\n                />\n              </svg>\n            )}\n          </button>\n          <button\n            className=\"room__messagePopupButton\"\n            onClick={() => setChatPopup(true)}\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"30.743px\"\n              height=\"30.744px\"\n              viewBox=\"0 0 30.743 30.744\"\n              fill=\"white\"\n            >\n              <path\n                d=\"M28.585,9.67h-0.842v9.255c0,1.441-0.839,2.744-2.521,2.744H8.743v0.44c0,1.274,1.449,2.56,2.937,2.56h12.599l4.82,2.834\n\t\tL28.4,24.669h0.185c1.487,0,2.158-1.283,2.158-2.56V11.867C30.743,10.593,30.072,9.67,28.585,9.67z\"\n              />\n              <path\n                d=\"M22.762,3.24H3.622C1.938,3.24,0,4.736,0,6.178v11.6c0,1.328,1.642,2.287,3.217,2.435l-1.025,3.891L8.76,20.24h14.002\n\t\tc1.684,0,3.238-1.021,3.238-2.462V8.393V6.178C26,4.736,24.445,3.24,22.762,3.24z M6.542,13.032c-0.955,0-1.729-0.774-1.729-1.729\n\t\ts0.774-1.729,1.729-1.729c0.954,0,1.729,0.774,1.729,1.729S7.496,13.032,6.542,13.032z M13,13.032\n\t\tc-0.955,0-1.729-0.774-1.729-1.729S12.045,9.574,13,9.574s1.729,0.774,1.729,1.729S13.955,13.032,13,13.032z M19.459,13.032\n\t\tc-0.955,0-1.73-0.774-1.73-1.729s0.775-1.729,1.73-1.729c0.953,0,1.729,0.774,1.729,1.729S20.412,13.032,19.459,13.032z\"\n              />\n            </svg>\n            {numUncheckedMessages > 0 ? (\n              <div>{numUncheckedMessages}</div>\n            ) : null}\n          </button>\n        </div>\n      </div>\n      <div className={\"room__chat \" + (chatPopUp ? \"popup\" : \"\")}>\n        <div className=\"room__header\">\n          <button onClick={() => setChatPopup(false)}>\n            <svg\n              version=\"1.1\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"20.743\"\n              height=\"20.743\"\n              viewBox=\"0 0 256 256\"\n              fill=\"white\"\n            >\n              <polygon points=\"207.093,30.187 176.907,0 48.907,128 176.907,256 207.093,225.813 109.28,128 \t\t\" />\n            </svg>\n          </button>\n          <p>Chat messages</p>\n          <div />\n        </div>\n        <div className=\"room__chatWindow\">\n          <ul className=\"room__messages\">\n            {messages.map(({ name, message }, index) => {\n              return (\n                <li key={index} className=\"message\">\n                  <b>{name}</b>\n                  <br />\n                  {message}\n                </li>\n              );\n            })}\n          </ul>\n        </div>\n        <div className=\"room__messageContainer\">\n          <input\n            onKeyDown={onMessageSent}\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n            placeholder=\"Type message here...\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Room;\n","import React, { useState } from \"react\";\nimport Room from \"./Room\";\nimport \"./RoomAuthentication.css\";\n\nfunction RoomAuthentication({ history, location }) {\n  let room_id = location.pathname.split(\"/\")[1];\n  const [formValidated, setFormValidated] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [hasPassword, setHasPassword] = useState(false);\n\n  const onFormSubmit = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (name.length > 0 && (!hasPassword || password.length > 0)) {\n      setFormValidated(true);\n    }\n  };\n\n  return !formValidated ? (\n    <div className=\"roomAuthentication\">\n      <form onSubmit={onFormSubmit} className=\"roomAuthentication__form\">\n        <h1>Authentication For Room: {room_id}</h1>\n        <input\n          onChange={(e) => {\n            setName(e.target.value);\n          }}\n          placeholder=\"Name\"\n          autoFocus={true}\n          className=\"roomAuthentication__name\"\n        ></input>\n\n        {hasPassword ? (\n          <>\n            <input\n              onChange={(e) => {\n                setPassword(e.target.value);\n              }}\n              placeholder=\"Password\"\n              className=\"roomAuthentication__password\"\n            ></input>\n          </>\n        ) : null}\n        <button className=\"roomAuthentication__submit\">\n          <svg\n            width=\"451.846px\"\n            height=\"451.847px\"\n            viewBox=\"0 0 451.846 451.847\"\n          >\n            <path\n              d=\"M345.441,248.292L151.154,442.573c-12.359,12.365-32.397,12.365-44.75,0c-12.354-12.354-12.354-32.391,0-44.744\n\t\tL278.318,225.92L106.409,54.017c-12.354-12.359-12.354-32.394,0-44.748c12.354-12.359,32.391-12.359,44.75,0l194.287,194.284\n\t\tc6.177,6.18,9.262,14.271,9.262,22.366C354.708,234.018,351.617,242.115,345.441,248.292z\"\n            />\n          </svg>\n        </button>\n      </form>\n    </div>\n  ) : (\n    <Room room_id={room_id} name={name} password={password}></Room>\n  );\n}\n\nexport default RoomAuthentication;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport RoomSelector from \"./RoomSelector\";\nimport RoomAuthentication from \"./RoomAuthentication\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <Route exact path=\"/\" component={RoomSelector} />\n      <Route exact path=\"/:room_id\" component={RoomAuthentication} />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 94;"],"sourceRoot":""}